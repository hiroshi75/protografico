# LLM ãƒ¢ãƒ‡ãƒ« ID ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

LangGraph ã§ã‚ˆãä½¿ç”¨ã•ã‚Œã‚‹ä¸»è¦ãª LLM ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ãƒ¢ãƒ‡ãƒ« ID ä¸€è¦§ã€‚å„ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®è©³ç´°ãªæƒ…å ±ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã«ã¤ã„ã¦ã¯ã€å€‹åˆ¥ã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

> **æœ€çµ‚æ›´æ–°**: 2025-11-24
> **æ³¨æ„**: ãƒ¢ãƒ‡ãƒ«ã®å¯ç”¨æ€§ã‚„åç§°ã¯å¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æœ€æ–°æƒ…å ±ã¯å„ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ“š ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åˆ¥ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### [Google Gemini ãƒ¢ãƒ‡ãƒ«](06_llm_model_ids_gemini.md)

Google ã®æœ€æ–° LLM ãƒ¢ãƒ‡ãƒ«ã€‚å¤§è¦æ¨¡ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆæœ€å¤§ 1M ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰ãŒç‰¹å¾´ã€‚

**ä¸»è¦ãƒ¢ãƒ‡ãƒ«**:
- `google/gemini-3-pro-preview` - æœ€æ–°ã®é«˜æ€§èƒ½ãƒ¢ãƒ‡ãƒ«
- `gemini-2.5-flash` - é«˜é€Ÿå¿œç­”ç‰ˆï¼ˆ1M ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰
- `gemini-2.5-flash-lite-preview` - è»½é‡é«˜é€Ÿç‰ˆ

**è©³ç´°**: [Gemini ãƒ¢ãƒ‡ãƒ« ID å®Œå…¨ã‚¬ã‚¤ãƒ‰](06_llm_model_ids_gemini.md)

---

### [Anthropic Claude ãƒ¢ãƒ‡ãƒ«](06_llm_model_ids_claude.md)

Anthropic ã® Claude 4.x ã‚·ãƒªãƒ¼ã‚ºã€‚ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸæ€§èƒ½ã¨ã‚³ã‚¹ãƒˆãŒç‰¹å¾´ã€‚

**ä¸»è¦ãƒ¢ãƒ‡ãƒ«**:
- `claude-opus-4-1-20250805` - æœ€å¼·ãƒ¢ãƒ‡ãƒ«
- `claude-sonnet-4-5` - ãƒãƒ©ãƒ³ã‚¹å‹ï¼ˆæ¨å¥¨ï¼‰
- `claude-haiku-4-5-20251001` - é«˜é€Ÿãƒ»ä½ã‚³ã‚¹ãƒˆ

**è©³ç´°**: [Claude ãƒ¢ãƒ‡ãƒ« ID å®Œå…¨ã‚¬ã‚¤ãƒ‰](06_llm_model_ids_claude.md)

---

### [OpenAI GPT ãƒ¢ãƒ‡ãƒ«](06_llm_model_ids_openai.md)

OpenAI ã® GPT-5 ã‚·ãƒªãƒ¼ã‚ºã€‚å¹…åºƒã„ã‚¿ã‚¹ã‚¯ã«å¯¾å¿œã—ã€400K ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¨é«˜åº¦ãªæ¨è«–èƒ½åŠ›ãŒç‰¹å¾´ã€‚

**ä¸»è¦ãƒ¢ãƒ‡ãƒ«**:
- `gpt-5` - GPT-5 æ¨™æº–ç‰ˆ
- `gpt-5-mini` - å°å‹ç‰ˆï¼ˆã‚³ã‚¹ãƒˆåŠ¹ç‡â—ï¼‰
- `gpt-5.1-thinking` - é©å¿œçš„æ¨è«–ãƒ¢ãƒ‡ãƒ«

**è©³ç´°**: [OpenAI ãƒ¢ãƒ‡ãƒ« ID å®Œå…¨ã‚¬ã‚¤ãƒ‰](06_llm_model_ids_openai.md)

---

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•

```python
from langchain_anthropic import ChatAnthropic
from langchain_openai import ChatOpenAI
from langchain_google_genai import ChatGoogleGenerativeAI

# Claude ã‚’ä½¿ç”¨
claude_llm = ChatAnthropic(model="claude-sonnet-4-5")

# OpenAI ã‚’ä½¿ç”¨
openai_llm = ChatOpenAI(model="gpt-5")

# Gemini ã‚’ä½¿ç”¨
gemini_llm = ChatGoogleGenerativeAI(model="gemini-2.5-flash")
```

### LangGraph ã§ã®ä½¿ç”¨

```python
from langgraph.graph import StateGraph
from langchain_anthropic import ChatAnthropic
from typing import TypedDict, Annotated
from langgraph.graph.message import add_messages

# çŠ¶æ…‹å®šç¾©
class State(TypedDict):
    messages: Annotated[list, add_messages]

# ãƒ¢ãƒ‡ãƒ«ã®åˆæœŸåŒ–
llm = ChatAnthropic(model="claude-sonnet-4-5")

# ãƒãƒ¼ãƒ‰å®šç¾©
def chat_node(state: State):
    response = llm.invoke(state["messages"])
    return {"messages": [response]}

# ã‚°ãƒ©ãƒ•æ§‹ç¯‰
graph = StateGraph(State)
graph.add_node("chat", chat_node)
graph.set_entry_point("chat")
graph.set_finish_point("chat")

app = graph.compile()
```

## ğŸ“Š ãƒ¢ãƒ‡ãƒ«é¸æŠã‚¬ã‚¤ãƒ‰

### ç”¨é€”åˆ¥ãŠã™ã™ã‚ãƒ¢ãƒ‡ãƒ«

| ç”¨é€” | æ¨å¥¨ãƒ¢ãƒ‡ãƒ« | ç†ç”± |
|------|-----------|------|
| **ã‚³ã‚¹ãƒˆé‡è¦–** | `claude-haiku-4-5`<br>`gpt-5-mini`<br>`gemini-2.5-flash-lite` | ä½ã‚³ã‚¹ãƒˆã§é«˜é€Ÿ |
| **ãƒãƒ©ãƒ³ã‚¹é‡è¦–** | `claude-sonnet-4-5`<br>`gpt-5`<br>`gemini-2.5-flash` | æ€§èƒ½ã¨ã‚³ã‚¹ãƒˆã®ãƒãƒ©ãƒ³ã‚¹ |
| **æ€§èƒ½é‡è¦–** | `claude-opus-4-1`<br>`gpt-5-pro`<br>`gemini-3-pro` | æœ€é«˜æ€§èƒ½ |
| **æ¨è«–ç‰¹åŒ–** | `gpt-5.1-thinking`<br>`gpt-5.1-instant` | é©å¿œçš„æ¨è«–ãƒ»æ•°å­¦ãƒ»ç§‘å­¦ |
| **å¤§è¦æ¨¡ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ** | `gemini-2.5-pro` | 1M ãƒˆãƒ¼ã‚¯ãƒ³ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ |

### ã‚¿ã‚¹ã‚¯è¤‡é›‘ã•ã«ã‚ˆã‚‹é¸æŠ

```python
def select_model(task_complexity: str, budget: str = "normal"):
    """ã‚¿ã‚¹ã‚¯ã¨äºˆç®—ã«å¿œã˜ã¦æœ€é©ãªãƒ¢ãƒ‡ãƒ«ã‚’é¸æŠ"""

    # äºˆç®—é‡è¦–
    if budget == "low":
        models = {
            "simple": "claude-haiku-4-5-20251001",
            "medium": "gpt-5-mini",
            "complex": "claude-sonnet-4-5"
        }
        return models.get(task_complexity, "gpt-5-mini")

    # æ€§èƒ½é‡è¦–
    if budget == "high":
        models = {
            "simple": "claude-sonnet-4-5",
            "medium": "gpt-5",
            "complex": "claude-opus-4-1-20250805"
        }
        return models.get(task_complexity, "claude-opus-4-1-20250805")

    # ãƒãƒ©ãƒ³ã‚¹é‡è¦–ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
    models = {
        "simple": "gpt-5-mini",
        "medium": "claude-sonnet-4-5",
        "complex": "gpt-5"
    }
    return models.get(task_complexity, "claude-sonnet-4-5")
```

## ğŸ”„ ãƒãƒ«ãƒãƒ¢ãƒ‡ãƒ«æˆ¦ç•¥

### ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼é–“ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

```python
from langchain_anthropic import ChatAnthropic
from langchain_openai import ChatOpenAI

# ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã¨ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
primary = ChatAnthropic(model="claude-sonnet-4-5")
fallback1 = ChatOpenAI(model="gpt-5")
fallback2 = ChatGoogleGenerativeAI(model="gemini-2.5-flash")

llm_with_fallback = primary.with_fallbacks([fallback1, fallback2])

# ã„ãšã‚Œã‹ã®ãƒ¢ãƒ‡ãƒ«ãŒæˆåŠŸã™ã‚‹ã¾ã§è‡ªå‹•çš„ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
response = llm_with_fallback.invoke("è³ªå•å†…å®¹")
```

### ã‚³ã‚¹ãƒˆæœ€é©åŒ–ã®è‡ªå‹•ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

```python
from langgraph.graph import StateGraph
from typing import TypedDict, Annotated, Literal
from langgraph.graph.message import add_messages

class State(TypedDict):
    messages: Annotated[list, add_messages]
    complexity: Literal["simple", "medium", "complex"]

# è¤‡é›‘ã•ã«å¿œã˜ã¦ç•°ãªã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨
simple_llm = ChatAnthropic(model="claude-haiku-4-5-20251001")  # ä½ã‚³ã‚¹ãƒˆ
medium_llm = ChatOpenAI(model="gpt-5-mini")  # ãƒãƒ©ãƒ³ã‚¹
complex_llm = ChatAnthropic(model="claude-opus-4-1-20250805")  # é«˜æ€§èƒ½

def analyze_complexity(state: State):
    """ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¤‡é›‘ã•ã‚’åˆ†æ"""
    message = state["messages"][-1].content
    # ç°¡æ˜“çš„ãªè¤‡é›‘ã•åˆ¤å®š
    if len(message) < 50:
        complexity = "simple"
    elif len(message) < 200:
        complexity = "medium"
    else:
        complexity = "complex"
    return {"complexity": complexity}

def route_by_complexity(state: State):
    """è¤‡é›‘ã•ã«å¿œã˜ã¦ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°"""
    routes = {
        "simple": "simple_node",
        "medium": "medium_node",
        "complex": "complex_node"
    }
    return routes[state["complexity"]]

def simple_node(state: State):
    response = simple_llm.invoke(state["messages"])
    return {"messages": [response]}

def medium_node(state: State):
    response = medium_llm.invoke(state["messages"])
    return {"messages": [response]}

def complex_node(state: State):
    response = complex_llm.invoke(state["messages"])
    return {"messages": [response]}

# ã‚°ãƒ©ãƒ•æ§‹ç¯‰
graph = StateGraph(State)
graph.add_node("analyze", analyze_complexity)
graph.add_node("simple_node", simple_node)
graph.add_node("medium_node", medium_node)
graph.add_node("complex_node", complex_node)

graph.set_entry_point("analyze")
graph.add_conditional_edges("analyze", route_by_complexity)

app = graph.compile()
```

## ğŸ”§ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. ç’°å¢ƒå¤‰æ•°ã§ã®ç®¡ç†

```python
import os

# ç’°å¢ƒå¤‰æ•°ã§ãƒ¢ãƒ‡ãƒ«ã‚’æŸ”è»Ÿã«ç®¡ç†
DEFAULT_MODEL = os.getenv("DEFAULT_LLM_MODEL", "claude-sonnet-4-5")
FAST_MODEL = os.getenv("FAST_LLM_MODEL", "claude-haiku-4-5-20251001")
SMART_MODEL = os.getenv("SMART_LLM_MODEL", "claude-opus-4-1-20250805")

# ç’°å¢ƒã«å¿œã˜ã¦ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’åˆ‡ã‚Šæ›¿ãˆ
PROVIDER = os.getenv("LLM_PROVIDER", "anthropic")

if PROVIDER == "anthropic":
    llm = ChatAnthropic(model=DEFAULT_MODEL)
elif PROVIDER == "openai":
    llm = ChatOpenAI(model="gpt-5")
elif PROVIDER == "google":
    llm = ChatGoogleGenerativeAI(model="gemini-2.5-flash")
```

### 2. ãƒ¢ãƒ‡ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å›ºå®šï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰

```python
# âœ… æ¨å¥¨: æ—¥ä»˜ä»˜ããƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ç”¨ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
prod_llm = ChatAnthropic(model="claude-sonnet-4-20250514")

# âš ï¸ æ³¨æ„: ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šãªã—ï¼ˆäºˆæœŸã—ãªã„æ›´æ–°ã®å¯èƒ½æ€§ï¼‰
dev_llm = ChatAnthropic(model="claude-sonnet-4")
```

### 3. ã‚³ã‚¹ãƒˆç›£è¦–

```python
from langchain.callbacks import get_openai_callback

# OpenAI ã®ã‚³ã‚¹ãƒˆè¿½è·¡
with get_openai_callback() as cb:
    response = openai_llm.invoke("è³ªå•")
    print(f"Total Cost: ${cb.total_cost}")
    print(f"Tokens: {cb.total_tokens}")

# ãã®ä»–ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¯æ‰‹å‹•ã§è¿½è·¡
# å„ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®è©³ç´°ãƒšãƒ¼ã‚¸ã‚’å‚ç…§
```

## ğŸ“– è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

å„ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®è©³ç´°ãªæƒ…å ±ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š

- **[Gemini ãƒ¢ãƒ‡ãƒ« ID](06_llm_model_ids_gemini.md)**: ãƒ¢ãƒ‡ãƒ«ä¸€è¦§ã€ä½¿ç”¨æ–¹æ³•ã€é«˜åº¦ãªè¨­å®šã€ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«æ©Ÿèƒ½
- **[Claude ãƒ¢ãƒ‡ãƒ« ID](06_llm_model_ids_claude.md)**: ãƒ¢ãƒ‡ãƒ«ä¸€è¦§ã€ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥IDã€ãƒ„ãƒ¼ãƒ«ä½¿ç”¨ã€å»ƒæ­¢ãƒ¢ãƒ‡ãƒ«æƒ…å ±
- **[OpenAI ãƒ¢ãƒ‡ãƒ« ID](06_llm_model_ids_openai.md)**: ãƒ¢ãƒ‡ãƒ«ä¸€è¦§ã€æ¨è«–ãƒ¢ãƒ‡ãƒ«ã€ãƒ“ã‚¸ãƒ§ãƒ³æ©Ÿèƒ½ã€Azure OpenAI

## ğŸ”— å‚è€ƒãƒªãƒ³ã‚¯

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Google Gemini API](https://ai.google.dev/gemini-api/docs/models)
- [Anthropic Claude API](https://docs.anthropic.com/en/docs/about-claude/models/overview)
- [OpenAI Platform](https://platform.openai.com/docs/models)

### çµ±åˆã‚¬ã‚¤ãƒ‰

- [LangChain Chat Models](https://docs.langchain.com/oss/python/modules/model_io/chat/)
- [LangGraph Documentation](https://langchain-ai.github.io/langgraph/)

### æ–™é‡‘æƒ…å ±

- [Gemini Pricing](https://ai.google.dev/pricing)
- [Claude Pricing](https://www.anthropic.com/pricing)
- [OpenAI Pricing](https://openai.com/pricing)
